{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import'bootstrap/dist/css/bootstrap.min.css';import'./App.css';import{storage,auth,provider}from\"./firebase\";import{signInWithPopup,onAuthStateChanged,signOut}from\"firebase/auth\";import{ref,uploadBytes,getDownloadURL,listAll}from\"firebase/storage\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const[isAuthenticated,setIsAuthenticated]=useState(false);const[isAdmin,setIsAdmin]=useState(false);const[videos,setVideos]=useState([]);const[currentVideoIndex,setCurrentVideoIndex]=useState(0);const videoRef=useRef(null);useEffect(()=>{const unsubscribe=onAuthStateChanged(auth,user=>{if(user){setIsAuthenticated(true);setIsAdmin(user.email===\"epsilonclasher12@gmail.com\");}else{setIsAuthenticated(false);setIsAdmin(false);}});return()=>unsubscribe();},[]);useEffect(()=>{const fetchVideos=async()=>{try{const videoRef=ref(storage,\"images/\");const videoSnapshot=await listAll(videoRef);const videoUrls=await Promise.all(videoSnapshot.items.map(item=>getDownloadURL(item)));setVideos(videoUrls);}catch(error){console.error(\"Error fetching videos:\",error);}};fetchVideos();},[]);const login=async()=>{try{await signInWithPopup(auth,provider);}catch(error){console.error(\"Error logging in:\",error);}};const logout=async()=>{try{await signOut(auth);}catch(error){console.error(\"Error logging out:\",error);}};const handleNext=()=>{setCurrentVideoIndex(prevIndex=>(prevIndex+1)%videos.length);};const handlePrevious=()=>{setCurrentVideoIndex(prevIndex=>(prevIndex-1+videos.length)%videos.length);};const handleDownload=()=>{const link=document.createElement('a');link.href=videos[currentVideoIndex];link.download=videos[currentVideoIndex].split('/').pop();link.click();};useEffect(()=>{if(videoRef.current){videoRef.current.load();videoRef.current.play().catch(error=>{console.log(\"Autoplay failed:\",error);});}},[currentVideoIndex]);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:!isAuthenticated?/*#__PURE__*/_jsx(\"button\",{onClick:login,className:\"btn btn-primary login-btn\",children:\"Login with Google\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"video-section\",children:videos.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"video-container\",children:/*#__PURE__*/_jsx(\"video\",{ref:videoRef,src:videos[currentVideoIndex],controls:true,className:\"video-player\",autoPlay:true,muted:false})}),/*#__PURE__*/_jsxs(\"div\",{className:\"controls\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handlePrevious,className:\"btn btn-info mx-2\",children:\"Previous\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDownload,className:\"btn btn-warning mx-2\",children:\"Download\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNext,className:\"btn btn-info mx-2\",children:\"Next\"})]})]})}),/*#__PURE__*/_jsx(\"footer\",{className:\"footer\",children:/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"btn btn-secondary logout-btn\",children:\"Logout\"})})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","storage","auth","provider","signInWithPopup","onAuthStateChanged","signOut","ref","uploadBytes","getDownloadURL","listAll","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","isAuthenticated","setIsAuthenticated","isAdmin","setIsAdmin","videos","setVideos","currentVideoIndex","setCurrentVideoIndex","videoRef","unsubscribe","user","email","fetchVideos","videoSnapshot","videoUrls","Promise","all","items","map","item","error","console","login","logout","handleNext","prevIndex","length","handlePrevious","handleDownload","link","document","createElement","href","download","split","pop","click","current","load","play","catch","log","className","children","onClick","src","controls","autoPlay","muted"],"sources":["/home/mahidhar/Desktop/ReactApp/reels/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\nimport { storage, auth, provider } from \"./firebase\";\nimport { signInWithPopup, onAuthStateChanged, signOut } from \"firebase/auth\";\nimport { ref, uploadBytes, getDownloadURL, listAll } from \"firebase/storage\";\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [videos, setVideos] = useState([]);\n  const [currentVideoIndex, setCurrentVideoIndex] = useState(0);\n  const videoRef = useRef(null);\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, (user) => {\n      if (user) {\n        setIsAuthenticated(true);\n        setIsAdmin(user.email === \"epsilonclasher12@gmail.com\");\n      } else {\n        setIsAuthenticated(false);\n        setIsAdmin(false);\n      }\n    });\n\n    return () => unsubscribe();\n  }, []);\n\n  useEffect(() => {\n    const fetchVideos = async () => {\n      try {\n        const videoRef = ref(storage, \"images/\");\n        const videoSnapshot = await listAll(videoRef);\n        const videoUrls = await Promise.all(\n          videoSnapshot.items.map((item) => getDownloadURL(item))\n        );\n        setVideos(videoUrls);\n      } catch (error) {\n        console.error(\"Error fetching videos:\", error);\n      }\n    };\n\n    fetchVideos();\n  }, []);\n\n  const login = async () => {\n    try {\n      await signInWithPopup(auth, provider);\n    } catch (error) {\n      console.error(\"Error logging in:\", error);\n    }\n  };\n\n  const logout = async () => {\n    try {\n      await signOut(auth);\n    } catch (error) {\n      console.error(\"Error logging out:\", error);\n    }\n  };\n\n  const handleNext = () => {\n    setCurrentVideoIndex((prevIndex) => (prevIndex + 1) % videos.length);\n  };\n\n  const handlePrevious = () => {\n    setCurrentVideoIndex((prevIndex) => (prevIndex - 1 + videos.length) % videos.length);\n  };\n\n  const handleDownload = () => {\n    const link = document.createElement('a');\n    link.href = videos[currentVideoIndex];\n    link.download = videos[currentVideoIndex].split('/').pop();\n    link.click();\n  };\n\n  useEffect(() => {\n    if (videoRef.current) {\n      videoRef.current.load();\n      videoRef.current.play().catch((error) => {\n        console.log(\"Autoplay failed:\", error);\n      });\n    }\n  }, [currentVideoIndex]);\n\n  return (\n    <div className=\"App\">\n      {!isAuthenticated ? (\n        <button onClick={login} className=\"btn btn-primary login-btn\">Login with Google</button>\n      ) : (\n        <>\n          <div className=\"video-section\">\n            {videos.length > 0 && (\n              <>\n                <div className=\"video-container\">\n                  <video\n                    ref={videoRef}\n                    src={videos[currentVideoIndex]}\n                    controls\n                    className=\"video-player\"\n                    autoPlay\n                    muted={false}\n                  />\n                </div>\n                <div className=\"controls\">\n                  <button onClick={handlePrevious} className=\"btn btn-info mx-2\">Previous</button>\n                  <button onClick={handleDownload} className=\"btn btn-warning mx-2\">Download</button>\n                  <button onClick={handleNext} className=\"btn btn-info mx-2\">Next</button>\n                </div>\n              </>\n            )}\n          </div>\n          <footer className=\"footer\">\n            <button onClick={logout} className=\"btn btn-secondary logout-btn\">Logout</button>\n          </footer>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}